<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;" />
  <title>Journally - Đăng nhập/Đăng ký</title>

  <!-- CSS -->
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/auth.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Dùng defer cho JS module -->
  <script type="module" src="../javascript/components.js" defer></script>
  <script type="module" src="../javascript/firebase.js" defer></script>
  <script type="module" src="../javascript/createComponents.js" defer></script>
  <script type="module" src="../javascript/auth.js" defer></script>

  <!-- Bootstrap Bundle -->
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <div id="header-container"></div>
  </header>
  
  <main class="auth">
    <section class="component" aria-label="Brand header">
      <img class="background" src="../assets/image/background.jpg" alt="Striped background pattern" />
      <h1 class="text-wrapper" aria-label="Digitally">Digitally</h1>
      <h2 class="div" aria-label="Journal">Journal</h2>
    </section>

    <section class="sign-in-sign-up-form" aria-labelledby="form-title">
      <header class="sign-in-sign-up">
        <h3 class="text-wrapper-2" id="form-title">Đăng nhập/Đăng ký</h3>
      </header>

      <form class="auth-form" action="/auth" method="post" novalidate>
        <div class="email-form">
          <label for="email-input" class="text-wrapper-3">Email</label>
          <input
            type="email"
            id="email-input"
            name="email"
            class="rectangle"
            required
            autocomplete="email"
          />
        </div>

        <div class="password-form">
          <label for="password-input" class="text-wrapper-4">Password</label>
          <input
            type="password"
            id="password-input"
            name="password"
            class="rectangle"
            required
            autocomplete="current-password"
          />
        </div>

        <div class="button-group">
          <button type="submit" class="sign-in-button" name="action" value="signin">
            <p>Đăng nhập</p>
          </button>
          <button type="submit" class="sign-up-button" name="action" value="signup">
            <p>Đăng ký</p>
          </button>
        </div>

        <button type="submit" class="sign-in-with-google">
          <i class="fa-brands fa-google" style="color: #C6EAFA; -webkit-text-stroke: 1px #000;"></i> 
          Đăng nhập với Google
        </button>
      </form>
    </section>
  </main>

  <footer>
    <div id="footer-container"></div>
  </footer>

  <!-- Chatbase -->
  <script>
    (function(){
      if(!window.chatbase || window.chatbase("getState")!=="initialized"){
        window.chatbase=(...args)=>{
          if(!window.chatbase.q){window.chatbase.q=[]}
          window.chatbase.q.push(args)
        };
        window.chatbase=new Proxy(window.chatbase,{
          get(target,prop){
            if(prop==="q"){return target.q}
            return(...args)=>target(prop,...args)
          }
        })
      }
      const onLoad=function(){
        const script=document.createElement("script");
        script.src="https://www.chatbase.co/embed.min.js";
        script.id="huIxgDhBOP2APxWQ5ynYV";
        script.domain="www.chatbase.co";
        document.body.appendChild(script)
      };
      if(document.readyState==="complete"){onLoad()}
      else{window.addEventListener("load",onLoad)}
    })();
  </script>
</body>
</html>